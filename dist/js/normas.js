"use strict";$.fn.each$=function(e){return this.each(function(t,n){e($(n),t)})},$.fn.filter$=function(e){return this.filter(function(t,n){return e($(n),t)})},$.fn.slideToggleByState=function(){if(this.length>0){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.length>0?t.shift()?this.slideDown.apply(this,t):this.slideUp.apply(this,t):this.slideToggle()}return this},$.fn.focusToEnd=function(){var e=this.first();if(e.is("select, :checkbox, :radio"))e.focus();else{var t=e.val();e.focus().val("").val(t)}return this},$.fn.focusTo=function(e){return this.each(function(t,n){if(n.createTextRange){var r=n.createTextRange();r.move("character",e),r.select()}else n.selectionStart?(n.focus(),n.setSelectionRange(e,e)):n.focus()})},$.fn.caretPosition=function(){var e=0,t=this[0];if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else null!=t.selectionStart&&(e=t.selectionStart);return e};var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(e){return Array.isArray(e)?e:Array.from(e)},l=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};function u(t){if(null==t||"object"!==(void 0===t?"undefined":e(t)))return!1;var n=Object.getPrototypeOf(t);if(null===n)return!0;var r=Object.prototype.hasOwnProperty.call(n,"constructor")&&n.constructor;return"function"==typeof r&&r instanceof r}var s=Array.isArray;function c(e){return"function"==typeof e}function g(e,t){return m("filter",e,t)}function f(e,t){return m("find",e,t)}function h(e,t){return Array.prototype.forEach.call(e,t)}function v(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(e[r],r),n},{})}function p(e,t){return g(e,function(e){return!y(t,e)})}function y(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function d(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Array.prototype.reduce.call(e,function(e,r){var o=c(t)?t(r):r[t];return n(e,o,r),e},r)}function m(e,t,n){return Array.prototype[e].call(t,function(e){if(c(e))return e;var t=Object.keys(e);return function(n){return function(e,t,n){return void 0===n.find(function(n){return t[n]!==e[n]})}(n,e,t)}}(n))}var b=Object.freeze({isPlainObject:u,isArray:s,isFunction:c,isString:function(e){return"string"==typeof e},compact:function(e){return g(e,function(e){return e})},debounce:function(e,t){var n=void 0;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n&&clearTimeout(n),n=setTimeout(function(){e.apply(void 0,o)},t)}},groupBy:function(e,t){return d(e,t,function(e,t,n){e[t]?e[t].push(n):e[t]=[n]})},countBy:function(e,t){return d(e,t,function(e,t){e[t]?e[t]++:e[t]=1})},groupByInArray:function(e,t){return d(e,t,function(e,t,n){var r=f(e,function(e){return i(e,1)[0]===t});r?r[1].push(n):e.push([t,[n]])},[])},flatten:function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.reduce(function(t,r){return s(r)?t.push.apply(t,l(n?e(r,!0):r)):t.push(r),t},[])},intersection:function(e,t){return s(t)||(t=[t]),(s(e)?e:[e]).reduce(function(e,n){return y(t,n)&&e.push(n),e},[])},deepMerge:function e(t,n){return Object.keys(n).reduce(function(r,o){if(n[o])return u(t[o])&&u(n[o])?r[o]=e(t[o],n[o]):r[o]=n[o],r},Object.assign({},t))},filter:g,find:f,findIndex:function(e,t){return m("find",e,t)},map:function(e,t){return Array.prototype.map.call(e,t)},each:h,mapValues:v,without:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return p(e,n)},difference:p,includes:y}),E={memoryData:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(!(r.length>0))return e[t];this.elementsApply(e,function(e){e[t]=r[0]})},removeMemoryData:function(e,t){var n=e[t];return delete e[t],n},data:function(e,t){var n=this;if(!((arguments.length<=2?0:arguments.length-2)>0))return t?this.dataParse(e.dataset[t]):v(e.dataset,function(e){return n.dataParse(e)});var r=this.dataStringify(arguments.length<=2?void 0:arguments[2]);this.elementsApply(e,function(e){e.dataset[t]=r})},removeData:function(e,t){var n=e.dataset[t];return delete e.dataset[t],n},dataStringify:function(e){return s(e)||u(e)?JSON.stringify(e):e},dataParse:function(e){try{return JSON.parse(e)}catch(t){return this.lastDataParseError=t,e}},elementsApply:function(e,t){this.isElement(e)?t(e):h(e,t)},isElement:function(e){return e instanceof Element},contains:function(e,t){return(e===document?document.body:e).contains(t)},remove:function(e){e.parentNode.removeChild(e)}},k=Object.assign({},b),O=function(){function e(n){var r=n.el,o=void 0===r?document:r,i=n.instanceName,a=void 0===i?"NormasApp":i;t(this,e),Object.defineProperty(this,"helpers",{enumerable:!0,writable:!0,value:k}),Object.defineProperty(this,"dom",{enumerable:!0,writable:!0,value:E}),this.instanceName=a,this.el=o,this.$el=$(o)}return n(e,[{key:"$",value:function(){var e;return(e=this.$el).find.apply(e,arguments)}},{key:"log",value:function(){}},{key:"error",value:function(){}}],[{key:"readOptions",value:function(e,t,n){Object.keys(n).forEach(function(r){e[r]=t&&r in t?t[r]:n[r]})}}]),e}();Object.defineProperty(O,"version",{enumerable:!0,writable:!0,value:"0.4.0-rc1"}),Object.defineProperty(O,"helpers",{enumerable:!0,writable:!0,value:k}),Object.defineProperty(O,"dom",{enumerable:!0,writable:!0,value:E});var P=function(e){return function(u){function s(e){t(this,s);var n=o(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return n.constructor.readOptions(n.logging,e.logging,{events:!0,eventsDebounced:!0,eventsTable:!1}),n.debugMode&&n.logging.events&&n.logging.eventsDebounced&&(n.eventsLogBuffer=[],n.logEventsDebounced=n.helpers.debounce(n.logEventsDebounced.bind(n),20)),n.log("info",["construct","events"],'🚦 "'+n.instanceName+'" events mixin activated.',"logging.events =",n.logging.events,"logging.eventsDebounced =",n.logging.eventsDebounced,"logging.eventsTable =",n.logging.eventsTable),n}return r(s,e),n(s,[{key:"trigger",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.$el.trigger(e,n)}},{key:"listenEvents",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.listenEventsOnElement.apply(this,[this.$el].concat(t))}},{key:"listenEventsOnElement",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=(t=this.constructor).listeningArguments.apply(t,r);return this.debugMode&&this.logging.events&&this.logEvents(e,i),i.forEach(function(t){var n=t.events,r=t.selector,o=t.handle;e.on(n,r,o)}),i}},{key:"forgetEvents",value:function(e){this.forgetEventsOnElement(this.$el,e)}},{key:"forgetEventsOnElement",value:function(e,t){this.logEventsOutput(e,t,!1),t.forEach(function(t){var n=t.events,r=t.selector,o=t.handle;e.off(n,r,o)})}},{key:"logEvents",value:function(e,t){if(this.logging.eventsDebounced){var n=e[0];t.forEach(function(e){e.element=n}),this.eventsLogBuffer=this.eventsLogBuffer.concat(t),this.logEventsDebounced()}else this.logEventsOutput(e,t,!0)}},{key:"logEventsDebounced",value:function(){var e=this;this.helpers.groupByInArray(this.eventsLogBuffer,"element").forEach(function(t){var n=i(t,2),r=n[0],o=n[1];e.logEventsOutput($(r),o,!0)}),this.eventsLogBuffer=[]}},{key:"logEventsOutput",value:function(e,t,n){if(this.logging.events){var r=e[0]===this.el?this.instanceName:this.constructor.contentName(e),o=t.length,i=this.constructor.logPlur("event%S%",o),u=o>1?this.constructor.logBold(o):[],s=a(u),c=s[0],g=s.slice(1),f=this.constructor.logCycle(n?"listen on":"forget from",n),h=a(f),v=h[0],p=h.slice(1),y=this.constructor.logBold(r),d=a(y),m=d[0],b=d.slice(1);this.log.apply(this,["events","🚦 "+(c?c+" ":"")+i+" "+v+' "'+m+'"'].concat(l(g),l(p),l(b),[e],l(this.logging.eventsTable?[]:[t]))),this.logging.eventsTable&&this.log("table",t.map(function(e){return{selector:e.selector,events:e.events}}))}}}],[{key:"listeningArguments",value:function(e,t,n){var r=this;if(this.helpers.isPlainObject(e)&&(t=e,e=""),this.helpers.isFunction(t)&&(n=t,t=e,e=""),this.helpers.isPlainObject(t))return this.helpers.flatten(Object.keys(t).map(function(n){var o=t[n];return r.helpers.isPlainObject(o)?r.listeningArguments(e?e+" "+n:n,o):r.listeningArguments(e,n,o)}));if(!this.helpers.isFunction(n))return console.error("handle isn't function in listening declaration! (selector: '"+e+"')"),[];if(!t)return console.error("eventRule not defined! (selector: '"+e+"')"),[];var o=t.split(/\s+/),i=o[0];return o[0]=e,i?[{events:i.replace(/\//g," "),selector:o.join(" ").trim(),handle:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n.apply(void 0,[$(e.currentTarget),e].concat(r))}}]:(console.error("bad eventName in listening declaration! (selector: '"+e+"')"),[])}}]),s}()}(function(e){var u,s;return s=u=function(u){function s(e){t(this,s);var n=o(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));n.constructor.readOptions(n,e,{debugMode:!0}),n.logging={},n.constructor.readOptions(n.logging,e.logging,{construct:!0,constructGrouping:!0,constructPrefix:"🏗️",hideInstancesOf:[]});var r=n.constructor.logColor("construct","green"),i=a(r),u=i[0],c=i.slice(1);return n.log.apply(n,[n.constructor.groupingMethod(n.logging.constructGrouping),"construct"].concat(l(n.constructor.logBold(n.logging.constructPrefix+' "%REPLACE%" '+u,n.instanceName)),l(c),[n])),n}return r(s,e),n(s,[{key:"log",value:function(){var e;if(this.debugMode){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=this.helpers.includes(this.constructor.consoleMethods,n[0])?n.shift():"log";this.helpers.intersection(Object.keys(this.logging),n[0]).length>0&&!this.logging[n.shift()]||(e=this.constructor).log.apply(e,[o].concat(l(this.filterLog(n))))}}},{key:"error",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this.constructor).log.apply(e,["error"].concat(n))}},{key:"filterLog",value:function(e){var t=this;return 0===this.logging.hideInstancesOf.length?e:this.helpers.filter(e,function(e){return!t.helpers.find(t.logging.hideInstancesOf,function(t){return e instanceof t})})}}],[{key:"groupingMethod",value:function(e){return"string"==typeof e?e:e?"group":"log"}},{key:"log",value:function(e){if(console&&console[e]){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console)[e].apply(t,r)}}},{key:"logPlur",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.replace("%COUNT%",n&&1===t?"":t).replace("%S%",1===t?"":"s")}},{key:"logCycle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return this.logColor(e+" "+(t?">":"<").repeat(n),t?"green":"red")}},{key:"logColor",value:function(e,t,n){return n||(n=t,t=null),this.logStyle(e,t,{color:n})}},{key:"logBold",value:function(e,t){return this.logStyle(e,t,{"font-weight":"bold"})}},{key:"logStyle",value:function(e,t,n){this.helpers.isPlainObject(t)&&(n=t,t=null),t||(t=e,e=null);var r=Object.entries(n),o=r.map(function(e){return e.join(": ")}).join("; "),a=r.map(function(e){return[i(e,1)[0],"inherit"].join(": ")}).join("; ");return t="%c"+t+"%c",e&&(t=e.replace("%REPLACE%",t)),[t,o,a]}},{key:"contentName",value:function(e){var t=this,n=this.helpers.countBy(e,function(e){var n=e.classList?t.helpers.map(e.classList,function(e){return e}):[];return[e.tagName].concat(n).join(".")});return Object.keys(n).map(function(e){var t=n[e];return(t>1?t+" ":"")+e}).join(" + ")}},{key:"readmeLink",value:function(e){return"Read https://github.com/evrone/normas#"+e}}]),s}(),Object.defineProperty(u,"consoleMethods",{enumerable:!0,writable:!0,value:["log","group","groupEnd","groupCollapsed","info","table","warn"]}),s}(O)),A=function(e){return function(i){function a(e){t(this,a);var n=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return Object.defineProperty(n,"checkMutations",{enumerable:!0,writable:!0,value:function(e){if(n.navigationStarted&&"childList"===e.type){var t=n.constructor.filterMutationNodes(e.removedNodes),r=n.constructor.filterMutationNodes(e.addedNodes,!0);t.length>0&&n.sayAboutContentLeave($(t)),r.length>0&&n.sayAboutContentEnter($(r))}}}),n.enablings||(n.enablings={}),n.constructor.readOptions(n.enablings,e.enablings,{mutations:!0}),n.log.apply(n,["info","construct"].concat(l(n.constructor.logColor('🤖 "'+n.instanceName+'" MutationObserver %REPLACE%.',n.enablings.mutations?"enabled":"disabled",n.enablings.mutations?"green":"blue")))),n.enablings.mutations&&(MutationObserver?n.observeMutations():n.log("warn","construct",'🤖 "'+n.instanceName+'" mutation observer NOT SUPPORTED!',n.constructor.readmeLink("-content-broadcasting"))),n}return r(a,e),n(a,[{key:"observeMutations",value:function(){var e=this;this.mutationObserver=new MutationObserver(function(t){return t.forEach(e.checkMutations)}),this.mutationObserver.observe(this.$el[0],{childList:!0,subtree:!0})}}],[{key:"filterMutationNodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.prototype.filter.call(e,function(e){return!(1!==e.nodeType||e.isPreview||["TITLE","META"].includes(e.tagName)||"turbolinks-progress-bar"===e.className||t&&!e.parentElement||e.parentElement&&"HEAD"===e.parentElement.tagName)})}}]),a}()}(function(e){var i,u;return u=i=function(i){function u(e){t(this,u);var n=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return Object.defineProperty(n,"navigationStarted",{enumerable:!0,writable:!0,value:!1}),n.constructor.readOptions(n.logging,e.logging,{navigation:!0,navigationGrouping:!0}),n.bindPageEvents(e),n.log("info","construct",'🗺 "'+n.instanceName+'" navigation mixin activated. logging.navigation =',n.logging.navigation),n}return r(u,e),n(u,[{key:"onStart",value:function(e){this.$el.one(this.constructor.navigationStartedEventName,function(t,n){return e(n)})}},{key:"bindPageEvents",value:function(e){(e.Turbolinks||global.Turbolinks)&&this.log("warn","🗺 You have Turbolinks, but not use integration.",this.constructor.readmeLink("turbolinks-integration")),$(this.pageEnter.bind(this))}},{key:"listenToPage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&this.$el.on(this.constructor.pageEnterEventName,function(t,n){return e(n)}),t&&this.$el.on(this.constructor.pageLeaveEventName,function(e,n){return t(n)})}},{key:"visit",value:function(e){window.location=e}},{key:"refreshPage",value:function(){this.visit(window.location)}},{key:"setHash",value:function(e){location.hash=e}},{key:"back",value:function(){global.history.back()}},{key:"replaceLocation",value:function(e){this.log("warn","🗺 `replaceLocation` works only with Turbolinks.")}},{key:"pushLocation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;global.history&&global.history.pushState(n,t,e)}},{key:"sayAboutPageLoading",value:function(e){this.log("warn","🗺 `sayAboutPageLoading` works only with Turbolinks.")}},{key:"pageEnter",value:function(){this.navigationStarted||(this.navigationStarted=!0,this.trigger(this.constructor.navigationStartedEventName,e),this.logging.constructGrouping&&this.log("groupEnd","construct"));var e=this.$page();this.logPage("enter",e),this.trigger(this.constructor.pageEnterEventName,e),this.sayAboutContentEnter(e)}},{key:"pageLeave",value:function(){var e=this.$page();this.logPage("leave",e),this.sayAboutContentLeave(e),this.trigger(this.constructor.pageLeaveEventName,e)}},{key:"$page",value:function(){return this.$(this.constructor.pageSelector)}},{key:"logPage",value:function(e,t){var n=this;if(this.debugMode&&this.logging.navigation){var r="enter"===e,o=this.constructor.logCycle(e,r,10),i=a(o),u=i[0],s=i.slice(1);this.logging.navigationGrouping&&this.logPageGroupEnd(),this.log.apply(this,[this.constructor.groupingMethod(this.logging.navigationGrouping),"navigation","🗺 page "+u].concat(l(s),l(r?[window.location.href]:[]),[t])),this.navigationGroup=!0,r&&this.logging.navigationGrouping&&setTimeout(function(){return n.logPageGroupEnd()},25)}}},{key:"logPageGroupEnd",value:function(){this.navigationGroup&&(this.log("groupEnd","navigation"),this.navigationGroup=!1)}}]),u}(),Object.defineProperty(i,"pageEnterEventName",{enumerable:!0,writable:!0,value:"page:enter"}),Object.defineProperty(i,"pageLeaveEventName",{enumerable:!0,writable:!0,value:"page:leave"}),Object.defineProperty(i,"navigationStartedEventName",{enumerable:!0,writable:!0,value:"navigation:started"}),Object.defineProperty(i,"pageSelector",{enumerable:!0,writable:!0,value:"body"}),u}(function(e){var i,u;return u=i=function(i){function u(e){t(this,u);var n=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return n.constructor.readOptions(n.logging,e.logging,{elements:!0}),n.log("info","construct",'💎 "'+n.instanceName+'" elements mixin activated.',"logging.elements =",n.logging.elements),n}return r(u,e),n(u,[{key:"listenToElement",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=Object.assign({delay:0,silent:!1},r),this.listenToContent(this.makeElementContentEnter(e,t,r),this.makeElementContentLeave(e,n,r))}},{key:"makeElementContentEnter",value:function(e,t,n){var r=this,o=n.delay,i=n.silent;return function(n){var a=r.constructor.contentElements(n,e);0!==a.length&&(o>0?r.dom.memoryData(a,r.constructor.elementEnterTimeoutIdDataName,setTimeout(function(){0!==(n=n.filter(function(e,t){return r.dom.contains(r.el,t)})).length&&0!==(a=r.constructor.contentElements(n,a)).length&&0!==(a=r.filterDelayedElements(a,!0)).length&&r.handleElements(a,e,t,"enter",i)},o)):r.handleElements(a,e,t,"enter",i))}}},{key:"makeElementContentLeave",value:function(e,t,n){var r=this,o=n.delay,i=n.silent;return t?function(n){var a=r.constructor.contentElements(n,e);0!==a.length&&(o>0&&0===(a=r.filterDelayedElements(a,!1)).length||r.handleElements(a,e,t,"leave",i))}:null}},{key:"filterDelayedElements",value:function(e,t){var n=this;return e.filter(function(e,r){var o=n.dom.memoryData(r,n.constructor.elementEnterTimeoutIdDataName);return o&&n.dom.removeMemoryData(r,n.constructor.elementEnterTimeoutIdDataName),!!o===t})}},{key:"handleElements",value:function(e,t,n,r,o){var i=this,a=[],l=this.helpers.filter(e,function(e){return!!i.canCycleElement(e,t,r)&&(i.constructor.preventEventForElement(e)?(a.push(e),!1):(n($(e)),!0))});o||this.logElements(l,a,t,r)}},{key:"canCycleElement",value:function(e,t,n){var r=this.dom.memoryData(e,"_normasElements"),o=r?r.indexOf(t):-1;return"enter"===n?-1!==o?(this.log.apply(this,["warn","elements"].concat(l(this.constructor.logBold('💎 element "%REPLACE%" already entered.',t)),[e])),!1):(r?r.push(t):this.dom.memoryData(e,"_normasElements",[t]),!0):-1!==o?(r.splice(o,1),!0):(this.log.apply(this,["warn","elements"].concat(l(this.constructor.logBold('💎 element "%REPLACE%" try leave, but did not enter.',t)),[e])),!1)}},{key:"logElements",value:function(e,t,n,r){var o=this.constructor.logBold(n),i=a(o),l=i[0],u=i.slice(1);if(e.length>0){var s=this.constructor.logCycle(r,"enter"===r,3),c=a(s),g=c[0],f=c.slice(1);this._logElements(e,"",g,l,f,u)}if(t.length>0){var h=this.constructor.logColor("prevent ","blue"),v=a(h),p=v[0],y=v.slice(1);this._logElements(t,p,r,l,y,u)}}},{key:"_logElements",value:function(e,t,n,r,o,i){var u=e.length,s=this.constructor.logPlur("element%S%",u),c=u>1?this.constructor.logBold(u):[],g=a(c),f=g[0],h=g.slice(1),v=[o];v[t?"push":"unshift"](h),this.log.apply(this,["elements","💎 "+t+(f?f+" ":"")+s+" "+n+' "'+r+'"'].concat(l(this.helpers.flatten(v)),l(i),[e]))}}],[{key:"contentElements",value:function(e,t){return e.filter(t).add(e.find(t))}},{key:"preventEventForElement",value:function(e){return $(e).closest("."+this.preventContentEventsClassName).length>0}}]),u}(),Object.defineProperty(i,"preventContentEventsClassName",{enumerable:!0,writable:!0,value:"js-prevent-normas"}),Object.defineProperty(i,"elementEnterTimeoutIdDataName",{enumerable:!0,writable:!0,value:"elementEnterTimeoutId"}),u}(function(e){var i,u;return u=i=function(i){function u(e){t(this,u);var n=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return n.constructor.readOptions(n.logging,e.logging,{content:!1,contentGrouping:!0}),n.log("info","construct",'📰 "'+n.instanceName+'" content mixin activated.',"logging.content =",n.logging.content),n}return r(u,e),n(u,[{key:"listenToContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&this.$el.on(this.constructor.contentEnterEventName,function(t,n){return e(n,t)}),t&&this.$el.on(this.constructor.contentLeaveEventName,function(e,n){return t(n,e)})}},{key:"sayAboutContentEnter",value:function(e){return this.sayAboutContentMove("enter",this.constructor.contentEnterEventName,e)}},{key:"sayAboutContentLeave",value:function(e){return this.sayAboutContentMove("leave",this.constructor.contentLeaveEventName,e)}},{key:"sayAboutContentMove",value:function(e,t,n){var r="enter"===e;return(n=this.constructor.filterContent(n,r?"normasEntered":"normasLeft",r)).length>0&&(this.logContent(e,n),this.trigger(t,n),this.logging.contentGrouping&&this.log("groupEnd","content")),n}},{key:"replaceContentInner",value:function(e,t){this.sayAboutContentLeave(e),e.html(t),this.sayAboutContentEnter(e)}},{key:"replaceContent",value:function(e,t){e.length>1&&(e=e.first()),this.sayAboutContentLeave(e),e.replaceWith(t),this.sayAboutContentEnter(t)}},{key:"logContent",value:function(e,t){var n=this.constructor.logCycle(e,"enter"===e,5),r=a(n),o=r[0],i=r.slice(1),u=this.constructor.logBold(this.constructor.contentName(t)),s=a(u),c=s[0],g=s.slice(1);this.log.apply(this,[this.constructor.groupingMethod(this.logging.contentGrouping),"content","📰 content "+o+' "'+c+'"'].concat(l(i),l(g),[t]))}}],[{key:"filterContent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.filter(function(e,r){return!(r[t]||n&&!r.parentElement||(r[t]=!0,0))})}}]),u}(),Object.defineProperty(i,"contentEnterEventName",{enumerable:!0,writable:!0,value:"content:enter"}),Object.defineProperty(i,"contentLeaveEventName",{enumerable:!0,writable:!0,value:"content:leave"}),u}(P))));A.NormasCore=P,module.exports=A;
//# sourceMappingURL=normas.js.map
