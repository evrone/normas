{"version":3,"file":"react.production.js","sources":["../../../src/js/extensions/react.js"],"sourcesContent":["/**\n * React integration for Normas\n *\n * @see {@link https://github.com/evrone/normas#reactjs-integration|Docs}\n * @see {@link https://github.com/evrone/normas/blob/master/src/js/extensions/react.js|Source}\n * @license MIT\n * @copyright Dmitry Karpunin <koderfunk@gmail.com>, 2017-2018\n */\n\nconst defaultOptions = {\n  selector: '[data-react-component]',\n  listenOptions: {},\n};\n\nexport default {\n  normas: null,\n  React: null,\n  ReactDOM: null,\n  PropTypes: null,\n  components: {},\n\n  init({ normas, app, React, ReactDOM, PropTypes }, options = {}) {\n    const { selector, listenOptions } = normas.helpers.deepMerge(defaultOptions, options);\n    this.normas = normas || app;\n    this.React = React;\n    this.ReactDOM = ReactDOM;\n    this.PropTypes = PropTypes;\n\n    normas.listenToElement(\n      selector,\n      this.mountComponentToElement.bind(this),\n      this.unmountComponentFromElement.bind(this),\n      listenOptions,\n    );\n  },\n\n  registerComponents(components) {\n    Object.assign(this.components, components);\n  },\n\n  // private\n\n  mountComponentToElement($element) {\n    const domNode = $element[0];\n    const name = domNode.getAttribute('data-react-component');\n    if (!name) {\n      this.normas.error('No component name in', domNode);\n      return;\n    }\n    const componentClass = this.components[name];\n    if (!componentClass) {\n      this.normas.error('No registered component class with name', name);\n      return;\n    }\n    const propsString = domNode.getAttribute('data-props');\n    const props = propsString ? JSON.parse(propsString) : null;\n    const component = this.React.createElement(componentClass, props);\n    this.ReactDOM.render(component, domNode);\n  },\n\n  unmountComponentFromElement($element) {\n    const domNode = $element[0];\n    this.ReactDOM.unmountComponentAtNode(domNode);\n  },\n}\n"],"names":["defaultOptions","normas","app","React","ReactDOM","PropTypes","options","helpers","deepMerge","selector","listenOptions","listenToElement","this","mountComponentToElement","bind","unmountComponentFromElement","components","assign","$element","domNode","name","getAttribute","componentClass","propsString","props","JSON","parse","component","createElement","render","error","unmountComponentAtNode"],"mappings":"aASA,IAAMA,YACM,qDAKF,WACD,cACG,eACC,wCAGJC,IAAAA,OAAQC,IAAAA,IAAKC,IAAAA,MAAOC,IAAAA,SAAUC,IAAAA,UAAaC,8DACZL,EAAOM,QAAQC,UAAUR,EAAgBM,GAArEG,IAAAA,SAAUC,IAAAA,mBACbT,OAASA,GAAUC,OACnBC,MAAQA,OACRC,SAAWA,OACXC,UAAYA,IAEVM,gBACLF,EACAG,KAAKC,wBAAwBC,KAAKF,MAClCA,KAAKG,4BAA4BD,KAAKF,MACtCF,gCAIeM,UACVC,OAAOL,KAAKI,WAAYA,qCAKTE,OAChBC,EAAUD,EAAS,GACnBE,EAAOD,EAAQE,aAAa,2BAC7BD,OAICE,EAAiBV,KAAKI,WAAWI,MAClCE,OAICC,EAAcJ,EAAQE,aAAa,cACnCG,EAAQD,EAAcE,KAAKC,MAAMH,GAAe,KAChDI,EAAYf,KAAKT,MAAMyB,cAAcN,EAAgBE,QACtDpB,SAASyB,OAAOF,EAAWR,aANzBlB,OAAO6B,MAAM,0CAA2CV,aALxDnB,OAAO6B,MAAM,uBAAwBX,yCAclBD,OACpBC,EAAUD,EAAS,QACpBd,SAAS2B,uBAAuBZ"}