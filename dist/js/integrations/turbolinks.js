"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),n=function t(e,n,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,o)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(o):void 0},o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};module.exports=function(i){var s,a;return a=s=function(s){function a(){return t(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return o(a,i),e(a,[{key:"bindPageEvents",value:function(n){this.Turbolinks=n.Turbolinks||global.Turbolinks;var i=!!this.Turbolinks;this.enablings||(this.enablings={}),this.constructor.readOptions(this.enablings,n.enablings,{turbolinks:i}),n.enablings&&!0===n.enablings.turbolinks&&!i&&this.error("ðŸ›¤ Turbolinks: `options.enablings.turbolinks === true` but Turbolinks is not detected.",this.constructor.readmeLink("turbolinks-integration")),this.log.apply(this,["info","construct"].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(this.constructor.logColor('ðŸ›¤ "'+this.instanceName+'" Turbolinks %REPLACE%.',this.enablings.turbolinks?"enabled":"disabled",this.enablings.turbolinks?"green":"blue")))),this.enablings.turbolinks?(function(n){var i=function(i){function a(){return t(this,a),r(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return o(a,i),e(a,[{key:"render",value:function(t,e){var n=t.snapshot,o=t.error,r=t.isPreview;this.markAsPreview(r),n?this.renderSnapshot(n,r,e):this.renderError(o,e)}},{key:"renderSnapshot",value:function(t,e,o){var r=new s(this.getSnapshot(),n.Snapshot.wrap(t),e);r.delegate=this.delegate,r.render(o)}}]),a}(n.View);n.View=i;var s=function(e){function n(e,o,i){t(this,n);var s=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,o));return i&&(s.newBody=s.newBody.cloneNode(!0),s.newBody.isPreview=!0),s}return o(n,e),n}(n.SnapshotRenderer)}(this.Turbolinks),this.listenEvents(this.constructor.turboPageEnterEventName,this.pageEnter.bind(this)),this.listenEvents(this.constructor.turboPageLeaveEventName,this.pageLeave.bind(this)),n.Turbolinks&&n.Turbolinks.start()):(n.enablings&&!1===n.enablings.turbolinks&&this.log("warn","construct","ðŸ›¤ You "+(this.Turbolinks?"":"do not ")+"have a Turbolinks and use integration, but `options.enablings.turbolinks === false`."),$(this.pageEnter.bind(this)))}},{key:"visit",value:function(t){this.enablings.turbolinks?this.Turbolinks.visit(t):n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"visit",this).call(this,t)}},{key:"setHash",value:function(t){if(this.enablings.turbolinks){var e=this.Turbolinks.controller;e.replaceHistoryWithLocationAndRestorationIdentifier(t,e.restorationIdentifier)}else n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setHash",this).call(this,t)}},{key:"replaceLocation",value:function(t){this.enablings.turbolinks?this.Turbolinks.controller.replaceHistoryWithLocationAndRestorationIdentifier(t):n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"replaceLocation",this).call(this,t)}},{key:"pushLocation",value:function(t){this.enablings.turbolinks?this.Turbolinks.controller.pushHistoryWithLocationAndRestorationIdentifier(t):n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"pushLocation",this).call(this,t)}},{key:"sayAboutPageLoading",value:function(t){if(this.enablings.turbolinks){var e=this.Turbolinks.controller.adapter.progressBar;t?(e.setValue(0),e.show()):e.hide()}else n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"sayAboutPageLoading",this).call(this,t)}}]),a}(),Object.defineProperty(s,"turboPageEnterEventName",{enumerable:!0,writable:!0,value:"turbolinks:load"}),Object.defineProperty(s,"turboPageLeaveEventName",{enumerable:!0,writable:!0,value:"turbolinks:before-cache"}),a};
//# sourceMappingURL=turbolinks.js.map
