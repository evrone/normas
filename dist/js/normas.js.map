{"version":3,"file":"normas.js","sources":["../../src/js/lib/jqueryAdditions.js","../../src/js/mixins/base.js","../../node_modules/isobject/index.js","../../node_modules/is-plain-object/index.js","../../src/js/lib/helpers.js","../../src/js/mixins/events.js","../../src/js/mixins/content.js","../../src/js/mixins/navigation.js","../../src/js/minimalNormas.js","../../src/js/view.js","../../src/js/mixins/views.js","../../src/js/index.js"],"sourcesContent":["$.fn.each$ = function (handle) {\n  return this.each((index, element) => {\n    handle($(element), index);\n  });\n};\n\n// [showOrHide[, duration[, callback]]]\n$.fn.slideToggleByState = function slideToggleByState(...a) {\n  if (this.length > 0) {\n    if (a.length > 0) {\n      if (a.shift()) {\n        this.slideDown(...a);\n      } else {\n        this.slideUp(...a);\n      }\n    } else {\n      this.slideToggle();\n    }\n  }\n  return this;\n};\n\n// http://css-tricks.com/snippets/jquery/mover-cursor-to-end-of-textarea/\n$.fn.focusToEnd = function focusToEnd() {\n  let $this = this.first();\n  if ($this.is('select, :checkbox, :radio')) {\n    $this.focus();\n  } else {\n    let val = $this.val();\n    $this.focus().val('').val(val);\n  }\n  return this;\n};\n\n$.fn.focusTo = function focusTo(caretPos) {\n  return this.each((index, element) => {\n    if (element.createTextRange) {\n      let range = element.createTextRange();\n      range.move('character', caretPos);\n      range.select();\n    } else if (element.selectionStart) {\n      element.focus();\n      element.setSelectionRange(caretPos, caretPos);\n    } else {\n      element.focus();\n    }\n  });\n};\n\n/*\n ** Returns the caret (cursor) position of the specified text field.\n ** Return value range is 0-oField.value.length.\n */\n$.fn.caretPosition = function caretPosition() {\n  // Initialize\n  let iCaretPos = 0;\n  let oField = this[0];\n\n  // IE Support\n  if (document.selection) {\n    // Set focus on the element\n    oField.focus();\n    // To get cursor position, get empty selection range\n    let oSel = document.selection.createRange();\n    // Move selection start to 0 position\n    oSel.moveStart('character', -oField.value.length);\n    // The caret position is selection length\n    iCaretPos = oSel.text.length;\n  } else if (oField.selectionStart != null) {\n    iCaretPos = oField.selectionStart;\n  }\n\n  // Return results\n  return iCaretPos;\n};\n","export default class Base {\n  constructor({ debugMode = true, $el = $(document), instanceName = 'NormasApp' }) {\n    this.instanceName = instanceName;\n    this.debugMode = debugMode;\n    this.$el = $el;\n    this.el = $el[0];\n    this.log('info', `\"${this.instanceName}\" constructed.`);\n  }\n\n  $(...args) {\n    return this.$el.find(...args);\n  }\n\n  log(...args) {\n    if (!this.debugMode) return;\n    let method = ['table', 'warn', 'info'].indexOf(args[0]) > -1 ? args.shift() : 'log';\n    this._log(method, ...args);\n  }\n\n  error(...args) {\n    this._log('error', ...args);\n  }\n\n  _log(method, ...args) {\n    if (console && console[method]) {\n      console[method](...args); // eslint-disable-line no-console\n    }\n  }\n}\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","// Sufficient for Normas implementation of functions like from lodash\n\nexport isPlainObject from 'is-plain-object';\n\nexport const isArray = Array.isArray;\n\nexport function isFunction(v) {\n  return typeof v === 'function';\n}\n\nexport function isString(v) {\n  return typeof v === 'string';\n}\n\nexport function compact(array) {\n  return filter(array, v => v);\n}\n\nexport function debounce(func, wait) {\n  let timeoutId;\n  return (...args) => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      func(...args);\n    }, wait);\n  }\n}\n\nexport function flatten(array) {\n  const result = [];\n  array.forEach(value => {\n    if (isArray(value)) {\n      result.push(...value);\n    } else {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nexport function filter(collection, conditions) {\n  return filterBase('filter', collection, conditions);\n}\n\nexport function find(collection, conditions) {\n  return filterBase('find', collection, conditions);\n}\n\nexport function map(collection, iteratee) {\n  return Array.prototype.map.call(collection, iteratee);\n}\n\nexport function mapValues(object, iteratee) {\n  const result = {};\n  Object.keys(object).forEach(key => {\n    result[key] = iteratee(object[key]);\n  });\n  return result;\n}\n\nexport function without(collection, ...values) {\n  return filter(collection, item => !values.includes(item));\n}\n\n// private\n\nfunction filterBase(baseName, collection, conditions) {\n  return Array.prototype[baseName].call(collection, makeConditionsMatch(conditions));\n}\n\nfunction makeConditionsMatch(conditions) {\n  if (isFunction(conditions)) {\n    return conditions;\n  } else {\n    const conditionsKeys = Object.keys(conditions);\n    return item => filterMatch(item, conditions, conditionsKeys);\n  }\n}\n\nfunction filterMatch(item, conditions, conditionsKeys) {\n  return conditionsKeys.find(key => conditions[key] !== item[key]) === undefined;\n}\n","import { isFunction, isPlainObject, debounce, flatten } from '../lib/helpers';\n\nexport default Base => (class extends Base {\n  constructor(options) {\n    super(options);\n    this.eventsDebug = this.debugMode && options.eventsDebug || false;\n    if (this.eventsDebug) {\n      this.eventsLogBuffer = [];\n      this.eventsLog = debounce(this.eventsLog.bind(this), 20);\n    }\n    this.log('info', `\"${this.instanceName}\" events mixin activated. eventsDebug =`, this.eventsDebug);\n  }\n\n  trigger(eventName, ...args) {\n    this.$el.trigger(eventName, args);\n  }\n\n  listenEvents(...args) {\n    const listeningArgs = this.listenEventsOnElement(this.$el, ...args);\n    if (this.eventsDebug) {\n      this.eventsLogBuffer = this.eventsLogBuffer.concat(listeningArgs);\n      this.eventsLog();\n    }\n    return listeningArgs;\n  }\n\n  listenEventsOnElement($element, ...args) {\n    const listeningArgs = this.constructor.listeningArguments(...args);\n    listeningArgs.forEach(({ events, selector, handle }) => {\n      $element.on(events, selector, handle);\n    });\n    return listeningArgs;\n  }\n\n  eventsLog() {\n    this.log('table', this.eventsLogBuffer);\n    this.eventsLogBuffer = [];\n  }\n\n  forgetEvents(listeningArgs) {\n    this.forgetEventsOnElement(this.$el, listeningArgs);\n  }\n\n  forgetEventsOnElement($element, listeningArgs) {\n    if (this.eventsDebug) {\n      this.log('forget events', listeningArgs);\n    }\n    listeningArgs.forEach(({ events, selector, handle }) => {\n      $element.off(events, selector, handle);\n    });\n  }\n\n  static listeningArguments(selector, eventRule, handle) {\n    if (isPlainObject(selector)) {\n      eventRule = selector;\n      selector = '';\n    }\n\n    if (isFunction(eventRule)) {\n      handle = eventRule;\n      eventRule = selector;\n      selector = '';\n    }\n\n    if (isPlainObject(eventRule)) {\n      return flatten(Object.keys(eventRule).map((key) => {\n        let value = eventRule[key];\n        return isPlainObject(value) ?\n          this.listeningArguments(selector ? `${selector} ${key}` : key, value)\n          :\n          this.listeningArguments(selector, key, value);\n      }));\n    }\n\n    if (!isFunction(handle)) {\n      console.error(`handle isn't function in listening declaration! (selector: '${selector}')`); // eslint-disable-line no-console\n      return [];\n    }\n    if (!eventRule) {\n      console.error(`eventRule not defined! (selector: '${selector}')`); // eslint-disable-line no-console\n      return [];\n    }\n\n    const selectors = eventRule.split(/\\s+/);\n    const eventName = selectors[0];\n    selectors[0] = selector;\n\n    if (!eventName) {\n      console.error(`bad eventName in listening declaration! (selector: '${selector}')`); // eslint-disable-line no-console\n      return [];\n    }\n\n    return [{\n      events: eventName.replace(/\\//g, ' '),\n      selector: selectors.join(' ').trim(),\n      handle: (event, ...args) => handle($(event.currentTarget), event, ...args),\n    }];\n  }\n});\n","// require events mixin\nexport default Base => (class extends Base {\n  static contentEnterEventName = 'content:enter';\n  static contentLeaveEventName = 'content:leave';\n\n  static preventContentEventsClassName = 'js-prevent-normas';\n\n  constructor(options) {\n    super(options);\n    this.log('info', `\"${this.instanceName}\" content mixin activated.`);\n  }\n\n  listenToElement(selector, enter, leave = null, delay = 0) {\n    let contentEnter = this.constructor.makeElementContentEnter(selector, enter);\n    if (delay > 0) {\n      contentEnter = this.constructor.makeDelayedElementContentEnter(contentEnter, delay);\n    }\n    const contentLeave = leave || delay > 0 ? this.constructor.makeElementContentLeave(selector, leave, delay) : null;\n    this.listenToContent(contentEnter, contentLeave);\n  }\n\n  listenToContent(enter, leave = null) {\n    if (enter) {\n      this.$el.on(this.constructor.contentEnterEventName, (event, $root) => enter($root, event));\n    }\n    if (leave) {\n      this.$el.on(this.constructor.contentLeaveEventName, (event, $root) => leave($root, event));\n    }\n  }\n\n  sayAboutContentEnter($content) {\n    $content = this.constructor.filterContent($content, 'normasEntered');\n    if ($content.length > 0) {\n      $content.removeClass(this.constructor.preventContentEventsClassName);\n      this.trigger(this.constructor.contentEnterEventName, $content);\n    }\n    return $content;\n  }\n\n  sayAboutContentLeave($content) {\n    $content = this.constructor.filterContent($content, 'normasLeft');\n    if ($content.length > 0) {\n      this.trigger(this.constructor.contentLeaveEventName, $content);\n    }\n    return $content;\n  }\n\n  replaceContentInner($container, content) {\n    this.sayAboutContentLeave($container);\n    $container.html(content);\n    this.sayAboutContentEnter($container);\n  }\n\n  replaceContent($content, $newContent) {\n    this.sayAboutContentLeave($content);\n    if ($content.length === 1) {\n      $content.replaceWith($newContent);\n    } else {\n      $newContent.insertBefore($content.first());\n      $content.remove();\n    }\n    this.sayAboutContentEnter($newContent);\n  }\n\n  // private\n\n  static makeElementContentEnter(selector, enter) {\n    return ($root) => {\n      $root.filter(selector).add($root.find(selector)).each$($element => {\n        if (!this.preventEventForElement($element)) {\n          enter($element);\n        }\n      });\n    };\n  }\n\n  static makeDelayedElementContentEnter(contentEnter, delay) {\n    return ($root) => {\n      $root.data('contentEnterTimeoutId', setTimeout(() => {\n        $root.removeData('contentEnterTimeoutId');\n        if (document.documentElement.hasAttribute('data-turbolinks-preview')) {\n          return;\n        }\n        contentEnter($root);\n      }, delay));\n    };\n  }\n\n  static makeElementContentLeave(selector, leave, delay) {\n    return ($root) => {\n      if (delay > 0) {\n        let timeoutId = $root.data('contentEnterTimeoutId');\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n          $root.removeData('contentEnterTimeoutId');\n        }\n      }\n      if (leave) {\n        $root.filter(selector).add($root.find(selector)).each$($element => {\n          if (!this.preventEventForElement($element)) {\n            leave($element);\n          }\n        });\n      }\n    };\n  }\n\n  static preventEventForElement($element) {\n    return $element.closest(`.${this.preventContentEventsClassName}`).length > 0;\n  }\n\n  static filterContent($content, elementFlagName) {\n    return $content.filter((_index, element) => {\n      if (element[elementFlagName]) {\n        return false;\n      } else {\n        element[elementFlagName] = true;\n        return true;\n      }\n    });\n  }\n});\n","// require content mixin\nexport default Base => (class extends Base {\n  static pageEnterEventName = 'page:enter';\n  static pageLeaveEventName = 'page:leave';\n  static pageSelector = 'body';\n\n  constructor(options) {\n    super(options);\n    this.bindPageEvents(options);\n    this.log('info', `\"${this.instanceName}\" navigation mixin activated.`);\n  }\n\n  bindPageEvents(options) {\n    if (options.Turbolinks || global.Turbolinks) {\n      const turboNormasImportPath = `normas${process.env.NODE_ENV === 'development' ? '/src/js' : ''}`;\n      this.log('warn',\n        `You have Turbolinks and can use '${turboNormasImportPath}/normasWithTurbolinks' instead 'normas'.`);\n    }\n    $(this.pageEnter.bind(this));\n  }\n\n  listenToPage(enter, leave = null) {\n    if (enter) {\n      this.listenEvents(this.constructor.pageEnterEventName, enter);\n    }\n    if (leave) {\n      this.listenEvents(this.constructor.pageLeaveEventName, leave);\n    }\n  }\n\n  visit(location) {\n    window.location = location;\n  }\n\n  refreshPage() {\n    this.visit(window.location);\n  }\n\n  setHash(hash) {\n    location.hash = hash;\n  }\n\n  back() {\n    global.history.back();\n  }\n\n  replaceLocation(url) {\n    this.log('`replaceLocation` works only with Turbolinks.');\n  }\n\n  pushLocation(url, title = null, state = null) {\n    if (global.history) global.history.pushState(state, title, url);\n  }\n\n  sayAboutPageLoading(state) {\n    this.log('`sayAboutPageLoading` works only with Turbolinks.');\n  }\n\n  pageEnter() {\n    const $page = this.$page();\n    this.trigger(this.constructor.pageEnterEventName, $page);\n    this.sayAboutContentEnter($page);\n  }\n\n  pageLeave() {\n    const $page = this.$page();\n    this.sayAboutContentLeave($page);\n    this.trigger(this.constructor.pageLeaveEventName, $page);\n  }\n\n  $page() {\n    return this.$(this.constructor.pageSelector);\n  }\n});\n","import './lib/jqueryAdditions';\nimport NormasBase from './mixins/base';\nimport normasEvents from './mixins/events';\nimport normasContent from './mixins/content';\nimport normasNavigation from './mixins/navigation';\n\nconst Normas =\n  normasNavigation(\n    normasContent(\n      normasEvents(\n        NormasBase\n      )\n    )\n  );\n\nexport default Normas;\n","import { isFunction, isString, isPlainObject, mapValues } from './lib/helpers';\nimport NormasBase from './mixins/base';\nimport normasEvents from './mixins/events';\n\nexport default class extends normasEvents(NormasBase) {\n  // Override it with your own initialization logic.\n  initialize(options) {\n  }\n\n  // Override it with your own unmount logic (like compo).\n  terminate() {\n  }\n\n  constructor(options) {\n    Object.assign(options, options.$el.data());\n    super(options);\n    this.reflectOptions(options);\n    this.initializeEvents(options);\n    this.initialize(options);\n  }\n\n  destructor() {\n    this.terminate();\n    if (this.listenedEvents) {\n      this.forgetEvents(this.listenedEvents);\n      this.listenedEvents = null;\n    }\n  }\n\n  reflectOptions(options) {\n    Object.keys(options).forEach(attr => {\n      if (this.hasOwnProperty(attr)) {\n        this[attr] = options[attr];\n      }\n    });\n  }\n\n  initializeEvents(_options) {\n    const { events } = this.constructor;\n    if (events) {\n      if (!this.linkedEvents) {\n        this.linkedEvents = this.linkEvents(isFunction(events) ? events() : events);\n      }\n      this.listenedEvents = this.listenEvents(this.linkedEvents);\n    }\n  }\n\n  linkEvents(events) {\n    return mapValues(events, handle => isString(handle) ?\n      this[handle].bind(this)\n      :\n      (typeof isPlainObject(handle) ? this.linkEvents(handle) : handle)\n    );\n  }\n};\n","// TODO: may be rename Views, views, View, view\nimport { filter, find, without } from '../lib/helpers';\nimport View from '../view';\n\n// require content mixin\n// require events mixin\nexport default Base => (class extends Base {\n  View = View;\n  viewClasses = {};\n  viewInstances = [];\n\n  constructor(options) {\n    super(options);\n    this.viewOptions = {\n      debugMode: this.debugMode,\n      eventsDebug: this.eventsDebug,\n      ...options.viewOptions,\n    };\n    this.log('info', `\"${this.instanceName}\" navigation mixin activated.`);\n  }\n\n  registerView(viewClass, options = {}) {\n    if (this.viewClasses[viewClass.selector]) {\n      this.error(`View class for selector \\`${viewClass.selector}\\` already registered`,\n        this.viewClasses[viewClass.selector]);\n      return;\n    }\n    this.viewClasses[viewClass.selector] = viewClass;\n    this.listenToElement(\n      viewClass.selector,\n      $el => this.bindView($el, viewClass, options),\n      $el => this.unbindView($el, viewClass),\n      viewClass.delay,\n    );\n  }\n\n  bindView($el, viewClass, options) {\n    if (!this.canBind($el, viewClass)) {\n      return null;\n    }\n    if (viewClass.instanceIndex) {\n      viewClass.instanceIndex += 1;\n    } else {\n      viewClass.instanceIndex = 1;\n    }\n    const view = new viewClass({\n      ...this.viewOptions,\n      ...options,\n      instanceName: `${viewClass.selector}_${viewClass.instanceIndex}`,\n      $el,\n    });\n    this.viewInstances.push(view);\n    return view;\n  }\n\n  canBind($element, viewClass) {\n    const view = this.getViewsOnElement($element, viewClass)[0];\n    if (view) {\n      this.log('warn', 'Element already has bound view', $element, viewClass, view);\n      return false;\n    }\n    return true;\n  }\n\n  unbindView($element, viewClass) {\n    const view = this.getViewsOnElement($element, viewClass)[0];\n    if (view) {\n      view.destructor();\n      this.viewInstances = without(this.viewInstances, view);\n    }\n  }\n\n  getViewsOnElement($element, viewClass = null) {\n    const el = $element instanceof $ ? $element[0] : $element;\n    const filterOptions = { el };\n    if (viewClass) {\n      filterOptions.constructor = viewClass;\n    }\n    return filter(this.viewInstances, filterOptions);\n  }\n\n  getViewsInContainer($container, checkRoot = true) {\n    return filter(this.viewInstances, view =>\n      view.$el.closest($container).length > 0 && (checkRoot || view.el !== $container[0])\n    );\n  }\n\n  getAllViews(viewClass) {\n    return filter(this.viewInstances, { constructor: viewClass });\n  }\n\n  getFirstView(viewClass) {\n    return find(this.viewInstances, { constructor: viewClass });\n  }\n\n  getFirstChildView(viewClass) {\n    return find(this.viewInstances, view => view instanceof viewClass);\n  }\n});\n","import MinimalNormas from './minimalNormas';\nimport normasViews from './mixins/views';\n\nexport default normasViews(MinimalNormas);\n"],"names":["$","fn","each$","handle","each","index","element","slideToggleByState","length","a","shift","slideDown","slideUp","slideToggle","focusToEnd","$this","first","is","focus","val","focusTo","caretPos","createTextRange","range","move","select","selectionStart","setSelectionRange","caretPosition","iCaretPos","oField","document","selection","oSel","createRange","moveStart","value","text","Base","debugMode","$el","instanceName","el","log","find","args","method","indexOf","_log","console","isObject","isArray","Array","isFunction","v","isString","debounce","func","wait","timeoutId","setTimeout","flatten","array","result","forEach","push","filter","collection","conditions","filterBase","mapValues","object","iteratee","keys","key","without","values","includes","item","baseName","prototype","call","makeConditionsMatch","conditionsKeys","Object","filterMatch","undefined","options","eventsDebug","eventsLogBuffer","eventsLog","bind","eventName","trigger","listeningArgs","listenEventsOnElement","concat","$element","constructor","listeningArguments","events","selector","on","forgetEventsOnElement","off","eventRule","isPlainObject","map","error","selectors","split","replace","join","trim","event","currentTarget","enter","leave","delay","contentEnter","makeElementContentEnter","makeDelayedElementContentEnter","contentLeave","makeElementContentLeave","listenToContent","contentEnterEventName","$root","contentLeaveEventName","$content","filterContent","removeClass","preventContentEventsClassName","$container","content","sayAboutContentLeave","html","sayAboutContentEnter","$newContent","replaceWith","insertBefore","remove","add","preventEventForElement","data","removeData","documentElement","hasAttribute","closest","elementFlagName","_index","bindPageEvents","Turbolinks","global","turboNormasImportPath","process","env","NODE_ENV","pageEnter","listenEvents","pageEnterEventName","pageLeaveEventName","location","visit","window","hash","history","back","url","title","state","pushState","$page","pageSelector","Normas","normasNavigation","normasContent","normasEvents","NormasBase","assign","reflectOptions","initializeEvents","initialize","terminate","listenedEvents","forgetEvents","hasOwnProperty","attr","_options","linkedEvents","linkEvents","babelHelpers.typeof","View","viewOptions","viewClass","viewClasses","listenToElement","bindView","unbindView","canBind","instanceIndex","view","viewInstances","getViewsOnElement","destructor","filterOptions","checkRoot","normasViews","MinimalNormas"],"mappings":"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"}