{"version":3,"file":"normasWithTurbolinks.js","sources":["../../src/js/lib/jqueryAdditions.js","../../node_modules/isobject/index.js","../../node_modules/is-plain-object/index.js","../../src/js/lib/helpers.js","../../src/js/mixins/base.js","../../src/js/mixins/events.js","../../src/js/mixins/content.js","../../src/js/mixins/navigation.js","../../src/js/minimalNormas.js","../../src/js/view.js","../../src/js/mixins/views.js","../../src/js/index.js","../../src/js/mixins/turbolinks.js","../../src/js/normasWithTurbolinks.js"],"sourcesContent":["$.fn.each$ = function (handle) {\n  return this.each((index, element) => {\n    handle($(element), index);\n  });\n};\n\n$.fn.filter$ = function (handle) {\n  return this.filter((index, element) => handle($(element), index));\n};\n\n// [showOrHide[, duration[, callback]]]\n$.fn.slideToggleByState = function slideToggleByState(...a) {\n  if (this.length > 0) {\n    if (a.length > 0) {\n      if (a.shift()) {\n        this.slideDown(...a);\n      } else {\n        this.slideUp(...a);\n      }\n    } else {\n      this.slideToggle();\n    }\n  }\n  return this;\n};\n\n// http://css-tricks.com/snippets/jquery/mover-cursor-to-end-of-textarea/\n$.fn.focusToEnd = function focusToEnd() {\n  let $this = this.first();\n  if ($this.is('select, :checkbox, :radio')) {\n    $this.focus();\n  } else {\n    let val = $this.val();\n    $this.focus().val('').val(val);\n  }\n  return this;\n};\n\n$.fn.focusTo = function focusTo(caretPos) {\n  return this.each((index, element) => {\n    if (element.createTextRange) {\n      let range = element.createTextRange();\n      range.move('character', caretPos);\n      range.select();\n    } else if (element.selectionStart) {\n      element.focus();\n      element.setSelectionRange(caretPos, caretPos);\n    } else {\n      element.focus();\n    }\n  });\n};\n\n/*\n ** Returns the caret (cursor) position of the specified text field.\n ** Return value range is 0-oField.value.length.\n */\n$.fn.caretPosition = function caretPosition() {\n  // Initialize\n  let iCaretPos = 0;\n  let oField = this[0];\n\n  // IE Support\n  if (document.selection) {\n    // Set focus on the element\n    oField.focus();\n    // To get cursor position, get empty selection range\n    let oSel = document.selection.createRange();\n    // Move selection start to 0 position\n    oSel.moveStart('character', -oField.value.length);\n    // The caret position is selection length\n    iCaretPos = oSel.text.length;\n  } else if (oField.selectionStart != null) {\n    iCaretPos = oField.selectionStart;\n  }\n\n  // Return results\n  return iCaretPos;\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","// Sufficient for Normas implementation of functions like from lodash\n\nexport isPlainObject from 'is-plain-object';\n\nexport const isArray = Array.isArray;\n\nexport function isFunction(v) {\n  return typeof v === 'function';\n}\n\nexport function isString(v) {\n  return typeof v === 'string';\n}\n\nexport function compact(array) {\n  return filter(array, v => v);\n}\n\nexport function debounce(func, wait) {\n  let timeoutId;\n  return (...args) => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      func(...args);\n    }, wait);\n  }\n}\n\nexport function groupBy(array, key) {\n  return array.reduce((grouped, item) => {\n    const groupKey = isFunction(key) ? key(item) : item[key];\n    (grouped[groupKey] || (grouped[groupKey] = [])).push(item);\n    return grouped;\n  }, {});\n}\n\nexport function groupByInArray(array, key) {\n  return array.reduce((grouped, item) => {\n    const groupKey = isFunction(key) ? key(item) : item[key];\n    const group = find(grouped, ([k]) => k === groupKey);\n    if (group) {\n      group[1].push(item);\n    } else {\n      grouped.push([groupKey, [item]]);\n    }\n    return grouped;\n  }, []);\n}\n\nexport function flatten(array) {\n  const result = [];\n  array.forEach(value => {\n    if (isArray(value)) {\n      result.push(...value);\n    } else {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nexport function filter(collection, conditions) {\n  return filterBase('filter', collection, conditions);\n}\n\nexport function find(collection, conditions) {\n  return filterBase('find', collection, conditions);\n}\n\nexport function map(collection, iteratee) {\n  return Array.prototype.map.call(collection, iteratee);\n}\n\nexport function mapValues(object, iteratee) {\n  const result = {};\n  Object.keys(object).forEach(key => {\n    result[key] = iteratee(object[key]);\n  });\n  return result;\n}\n\nexport function without(collection, ...values) {\n  return filter(collection, item => !values.includes(item));\n}\n\n// private\n\nfunction filterBase(baseName, collection, conditions) {\n  return Array.prototype[baseName].call(collection, makeConditionsMatch(conditions));\n}\n\nfunction makeConditionsMatch(conditions) {\n  if (isFunction(conditions)) {\n    return conditions;\n  } else {\n    const conditionsKeys = Object.keys(conditions);\n    return item => filterMatch(item, conditions, conditionsKeys);\n  }\n}\n\nfunction filterMatch(item, conditions, conditionsKeys) {\n  return conditionsKeys.find(key => conditions[key] !== item[key]) === undefined;\n}\n","import { isPlainObject } from '../lib/helpers';\n\nexport default class Base {\n  static version = '0.3.0';\n\n  constructor({ debugMode = true, $el = $(document), instanceName = 'NormasApp', logging = {} }) {\n    this.instanceName = instanceName;\n    this.debugMode = debugMode;\n    this.logging = {\n      construct: this.constructor.readOption(logging, 'construct', true),\n    };\n    this.$el = $el;\n    this.el = $el[0];\n    this.log('info', 'construct',\n      ...this.constructor.logColor(`ðŸ—ï¸ \"${this.instanceName}\" %REPLACE%.`, 'constructed', 'green'));\n  }\n\n  $(...args) {\n    return this.$el.find(...args);\n  }\n\n  log(...args) {\n    if (!this.debugMode) return;\n    const method = ['table', 'warn', 'info'].includes(args[0]) ? args.shift() : 'log';\n    if (Object.keys(this.logging).includes(args[0]) && !this.logging[args.shift()]) return;\n    this.constructor.log(method, ...args);\n  }\n\n  error(...args) {\n    this.constructor.log('error', ...args);\n  }\n\n  // private\n\n  static log(method, ...args) {\n    if (console && console[method]) {\n      console[method](...args); // eslint-disable-line no-console\n    }\n  }\n\n  static logPlur(message, count) {\n    return message.replace('%COUNT%', count).replace('%S%', count === 1 ? '' : 's');\n  }\n\n  static logCycle(moveName, enter, intensity = 2) {\n    return this.logColor(\n      `${moveName} ${(enter ? '>' : '<').repeat(intensity)}`,\n      enter ? 'green' : 'red',\n    );\n  }\n\n  static logColor(template, colorText, color) {\n    if (!color) {\n      color = colorText;\n      colorText = null;\n    }\n    return this.logStyle(template, colorText, { color });\n  }\n\n  static logBold(template, boldText) {\n    return this.logStyle(template, boldText, { 'font-weight': 'bold' });\n  }\n\n  static logStyle(template, stylingReplace, style) {\n    if (isPlainObject(stylingReplace)) {\n      style = stylingReplace;\n      stylingReplace = null;\n    }\n    if (!stylingReplace) {\n      stylingReplace = template;\n      template = null;\n    }\n    const stylePairs = Object.entries(style);\n    const beginStyle = stylePairs.map(p => p.join(': ')).join('; ');\n    const endStyle = stylePairs.map(([k]) => [k, 'inherit'].join(': ')).join('; ');\n    stylingReplace = `%c${stylingReplace}%c`;\n    if (template) {\n      stylingReplace = template.replace('%REPLACE%', stylingReplace);\n    }\n    return [stylingReplace, beginStyle, endStyle];\n  }\n\n  static contentName($content) {\n    const content = $content[0];\n    const classList = content.classList ? Array.prototype.map.call(content.classList, className => className) : [];\n    return [content.tagName].concat(classList).join('.');\n  }\n}\n","import { isFunction, isPlainObject, debounce, flatten, groupByInArray } from '../lib/helpers';\n\nexport default Base => (class extends Base {\n  static readOption(object, key, defaultValue) {\n    return object && (key in object) ? object[key] : defaultValue;\n  }\n\n  constructor(options) {\n    super(options);\n    this.logging.events = this.constructor.readOption(options.logging, 'events', true);\n    this.logging.eventsDebounced = this.constructor.readOption(options.logging, 'eventsDebounced', true);\n    this.logging.eventsTable = this.constructor.readOption(options.logging, 'eventsTable', true);\n    if (this.debugMode && this.logging.events && this.logging.eventsDebounced) {\n      this.eventsLogBuffer = [];\n      this.logEventsDebounced = debounce(this.logEventsDebounced.bind(this), 20);\n    }\n    this.log('info', 'construct',\n      `ðŸš¦ \"${this.instanceName}\" events mixin activated.`,\n      'logging.events =', this.logging.events,\n      'logging.eventsDebounced =', this.logging.eventsDebounced,\n      'logging.eventsTable =', this.logging.eventsTable);\n  }\n\n  trigger(eventName, ...args) {\n    this.$el.trigger(eventName, args);\n  }\n\n  listenEvents(...args) {\n    return this.listenEventsOnElement(this.$el, ...args);\n  }\n\n  listenEventsOnElement($element, ...args) {\n    const listeningArgs = this.constructor.listeningArguments(...args);\n    if (this.debugMode && this.logging.events) {\n      this.logEvents($element, listeningArgs);\n    }\n    listeningArgs.forEach(({ events, selector, handle }) => {\n      $element.on(events, selector, handle);\n    });\n    return listeningArgs;\n  }\n  \n  forgetEvents(listeningArgs) {\n    this.forgetEventsOnElement(this.$el, listeningArgs);\n  }\n\n  forgetEventsOnElement($element, listeningArgs) {\n    this.logEventsOutput($element, listeningArgs, false);\n    listeningArgs.forEach(({ events, selector, handle }) => {\n      $element.off(events, selector, handle);\n    });\n  }\n\n  // private\n\n  logEvents($element, listeningArgs) {\n    if (this.logging.eventsDebounced) {\n      const element = $element[0];\n      listeningArgs.forEach(args => { args.element = element; });\n      this.eventsLogBuffer = this.eventsLogBuffer.concat(listeningArgs);\n      this.logEventsDebounced();\n    } else {\n      this.logEventsOutput($element, listeningArgs, true);\n    }\n  }\n\n  logEventsDebounced() {\n    const grouped = groupByInArray(this.eventsLogBuffer, 'element');\n    grouped.forEach(([element, listeningArgs]) => {\n      this.logEventsOutput($(element), listeningArgs, true);\n    });\n    this.eventsLogBuffer = [];\n  }\n\n  logEventsOutput($element, listeningArgs, enter) {\n    if (!this.logging.events) return;\n    const elementName = $element[0] === this.el ? this.instanceName : this.constructor.contentName($element);\n    const plurEvents = this.constructor.logPlur('event%S%', listeningArgs.length);\n    const [styledCount, ...countStyles] = this.constructor.logBold(listeningArgs.length);\n    const [cycleName, ...cycleStyles] = this.constructor.logCycle(enter ? 'listen on' : 'forget from', enter);\n    const [styledElementName, ...elementStyles] = this.constructor.logBold(elementName);\n    this.log('events',\n      `ðŸš¦ ${styledCount} ${plurEvents} ${cycleName} \"${styledElementName}\"`,\n      ...countStyles, ...cycleStyles, ...elementStyles,\n      $element, ...(this.logging.eventsTable ? [] : [listeningArgs]));\n    if (!this.logging.eventsTable) return;\n    this.log('table', listeningArgs.map(({ selector, events }) => ({ selector, events })));\n  }\n\n  static listeningArguments(selector, eventRule, handle) {\n    if (isPlainObject(selector)) {\n      eventRule = selector;\n      selector = '';\n    }\n\n    if (isFunction(eventRule)) {\n      handle = eventRule;\n      eventRule = selector;\n      selector = '';\n    }\n\n    if (isPlainObject(eventRule)) {\n      return flatten(Object.keys(eventRule).map((key) => {\n        let value = eventRule[key];\n        return isPlainObject(value) ?\n          this.listeningArguments(selector ? `${selector} ${key}` : key, value)\n          :\n          this.listeningArguments(selector, key, value);\n      }));\n    }\n\n    if (!isFunction(handle)) {\n      console.error(`handle isn't function in listening declaration! (selector: '${selector}')`); // eslint-disable-line no-console\n      return [];\n    }\n    if (!eventRule) {\n      console.error(`eventRule not defined! (selector: '${selector}')`); // eslint-disable-line no-console\n      return [];\n    }\n\n    const selectors = eventRule.split(/\\s+/);\n    const eventName = selectors[0];\n    selectors[0] = selector;\n\n    if (!eventName) {\n      console.error(`bad eventName in listening declaration! (selector: '${selector}')`); // eslint-disable-line no-console\n      return [];\n    }\n\n    return [{\n      events: eventName.replace(/\\//g, ' '),\n      selector: selectors.join(' ').trim(),\n      handle: (event, ...args) => handle($(event.currentTarget), event, ...args),\n    }];\n  }\n});\n","// require events mixin\nexport default Base => (class extends Base {\n  static contentEnterEventName = 'content:enter';\n  static contentLeaveEventName = 'content:leave';\n\n  static preventContentEventsClassName = 'js-prevent-normas';\n  static elementEnterTimeoutIdDataName = 'elementEnterTimeoutId';\n\n  constructor(options) {\n    super(options);\n    Object.assign(this.logging, {\n      content: this.constructor.readOption(options.logging, 'content', false),\n      element: this.constructor.readOption(options.logging, 'element', true),\n    });\n    this.log('info', 'construct',\n      `ðŸ“° \"${this.instanceName}\" content mixin activated.`,\n      'logging.content =', this.logging.content,\n      'logging.element =', this.logging.element);\n  }\n\n  listenToElement(selector, enter, leave = null, options = {}) {\n    const delay = options.delay || 0;\n    const silent = options.silent || false;\n    const contentEnter = this.constructor.makeElementContentEnter(this, selector, enter, delay, silent);\n    const contentLeave = this.constructor.makeElementContentLeave(this, selector, leave, delay, silent);\n    this.listenToContent(contentEnter, contentLeave);\n  }\n\n  listenToContent(enter, leave = null) {\n    if (enter) {\n      this.$el.on(this.constructor.contentEnterEventName, (event, $content) => enter($content, event));\n    }\n    if (leave) {\n      this.$el.on(this.constructor.contentLeaveEventName, (event, $content) => leave($content, event));\n    }\n  }\n\n  sayAboutContentEnter($content) {\n    $content = this.constructor.filterContent($content, 'normasEntered');\n    if ($content.length > 0) {\n      // ? $content.removeClass(this.constructor.preventContentEventsClassName);\n      this.logContent('enter', $content);\n      this.trigger(this.constructor.contentEnterEventName, $content);\n    }\n    return $content;\n  }\n\n  sayAboutContentLeave($content) {\n    $content = this.constructor.filterContent($content, 'normasLeft');\n    if ($content.length > 0) {\n      this.logContent('leave', $content);\n      this.trigger(this.constructor.contentLeaveEventName, $content);\n    }\n    return $content;\n  }\n\n  replaceContentInner($container, content) {\n    this.sayAboutContentLeave($container);\n    $container.html(content);\n    this.sayAboutContentEnter($container);\n  }\n\n  replaceContent($content, $newContent) {\n    this.sayAboutContentLeave($content);\n    if ($content.length === 1) {\n      $content.replaceWith($newContent);\n    } else {\n      $newContent.insertBefore($content.first());\n      $content.remove();\n    }\n    this.sayAboutContentEnter($newContent);\n  }\n\n  // private\n\n  logContent(logEvent, $content) {\n    const [eventName, ...eventStyles] = this.constructor.logCycle(logEvent, logEvent === 'enter');\n    const [contentName, ...contentStyles] = this.constructor.logBold(this.constructor.contentName($content));\n    this.log('content',\n      `ðŸ“° content ${eventName} \"${contentName}\"`,\n      ...eventStyles, ...contentStyles,\n      $content);\n  }\n\n  static makeElementContentEnter(instance, selector, enter, delay, silent) {\n    return $content => {\n      const $elements = this.contentElements($content, selector);\n      if ($elements.length === 0) {\n        return;\n      }\n      if (delay > 0) {\n        $elements.data(this.elementEnterTimeoutIdDataName, setTimeout(() => {\n          const $delayedElements = this.contentElements($content, $elements);\n          $delayedElements.removeData(this.elementEnterTimeoutIdDataName);\n          this.handleElements(instance, $delayedElements, selector, enter, 'enter', silent);\n        }, delay));\n      } else {\n        this.handleElements(instance, $elements, selector, enter, 'enter', silent);\n      }\n    };\n  }\n\n  static makeElementContentLeave(instance, selector, leave, delay, silent) {\n    if (!leave) {\n      return null;\n    }\n    return $content => {\n      let $elements = this.contentElements($content, selector);\n      if ($elements.length === 0) {\n        return;\n      }\n      if (delay > 0) {\n        $elements = $elements.filter$($element => !$element.data(this.elementEnterTimeoutIdDataName));\n      }\n      if ($elements.length === 0) {\n        return;\n      }\n      this.handleElements(instance, $elements, selector, leave, 'leave', silent);\n    };\n  }\n\n  static handleElements(instance, $elements, selector, handle, handleName, silent) {\n    $elements.each$($element => {\n      const prevent = this.preventEventForElement($element);\n      if (!silent) {\n        let preventInfo, styledHandleName, handleStyles;\n        const [elementName, ...elementStyles] = this.logBold(selector);\n        if (prevent) {\n          [preventInfo, ...handleStyles] = this.logColor('prevent ', 'blue');\n          styledHandleName = handleName;\n        } else {\n          preventInfo = '';\n          [styledHandleName, ...handleStyles] = this.logCycle(handleName, handleName === 'enter', 3);\n        }\n        instance.log('element',\n          `ðŸ’Ž ${preventInfo}element ${styledHandleName} \"${elementName}\"`,\n          ...handleStyles, ...elementStyles,\n          $element);\n      }\n      if (!prevent) {\n        handle($element);\n      }\n    });\n  }\n\n  static contentElements($content, selector) {\n    return $content.filter(selector).add($content.find(selector));\n  }\n\n  static preventEventForElement($element) {\n    return $element.closest(`.${this.preventContentEventsClassName}`).length > 0;\n  }\n\n  static filterContent($content, elementFlagName) {\n    return $content.filter((_index, element) => {\n      if (element[elementFlagName]) {\n        return false;\n      } else {\n        element[elementFlagName] = true;\n        return true;\n      }\n    });\n  }\n});\n","// require content mixin\nexport default Base => (class extends Base {\n  static pageEnterEventName = 'page:enter';\n  static pageLeaveEventName = 'page:leave';\n  static pageSelector = 'body';\n\n  constructor(options) {\n    super(options);\n    this.logging.navigation = this.constructor.readOption(options.logging, 'navigation', true);\n    this.bindPageEvents(options);\n    this.log('info', 'construct',\n      `ðŸ—º \"${this.instanceName}\" navigation mixin activated. logging.navigation =`, this.logging.navigation);\n  }\n\n  bindPageEvents(options) {\n    if (options.Turbolinks || global.Turbolinks) {\n      const turboNormasImportPath = `normas${process.env.NODE_ENV === 'development' ? '/src/js' : ''}`;\n      this.log('warn', 'construct',\n        `ðŸ—º You have Turbolinks and can use '${turboNormasImportPath}/normasWithTurbolinks' instead 'normas'.`);\n    }\n    $(this.pageEnter.bind(this));\n  }\n\n  listenToPage(enter, leave = null) {\n    if (enter) {\n      this.listenEvents(this.constructor.pageEnterEventName, enter);\n    }\n    if (leave) {\n      this.listenEvents(this.constructor.pageLeaveEventName, leave);\n    }\n  }\n\n  visit(location) {\n    window.location = location;\n  }\n\n  refreshPage() {\n    this.visit(window.location);\n  }\n\n  setHash(hash) {\n    location.hash = hash;\n  }\n\n  back() {\n    global.history.back();\n  }\n\n  replaceLocation(url) {\n    this.log('warn', 'ðŸ—º `replaceLocation` works only with Turbolinks.');\n  }\n\n  pushLocation(url, title = null, state = null) {\n    if (global.history) global.history.pushState(state, title, url);\n  }\n\n  sayAboutPageLoading(state) {\n    this.log('warn', 'ðŸ—º `sayAboutPageLoading` works only with Turbolinks.');\n  }\n\n  pageEnter() {\n    const $page = this.$page();\n    this.logPage('enter', $page);\n    this.trigger(this.constructor.pageEnterEventName, $page);\n    this.sayAboutContentEnter($page);\n  }\n\n  pageLeave() {\n    const $page = this.$page();\n    this.logPage('leave', $page);\n    this.sayAboutContentLeave($page);\n    this.trigger(this.constructor.pageLeaveEventName, $page);\n  }\n\n  $page() {\n    return this.$(this.constructor.pageSelector);\n  }\n\n  // private\n\n  logPage(logEvent, $page) {\n    const enter = logEvent === 'enter';\n    const [eventName, ...eventStyles] = this.constructor.logCycle(logEvent, enter, 10);\n    this.log('navigation', `ðŸ—º page ${eventName}`, ...eventStyles, ...(enter ? [window.location.href] : []), $page);\n  }\n});\n","import './lib/jqueryAdditions';\nimport NormasBase from './mixins/base';\nimport normasEvents from './mixins/events';\nimport normasContent from './mixins/content';\nimport normasNavigation from './mixins/navigation';\n\nconst Normas =\n  normasNavigation(\n    normasContent(\n      normasEvents(\n        NormasBase\n      )\n    )\n  );\n\nexport default Normas;\n","import { isFunction, isString, isPlainObject, mapValues } from './lib/helpers';\nimport NormasBase from './mixins/base';\nimport normasEvents from './mixins/events';\n\nexport default class extends normasEvents(NormasBase) {\n  // Override it with your own initialization logic (like componentDidUnmount in react).\n  initialize(options) {\n  }\n\n  // Override it with your own unmount logic (like componentWillUnmount in react).\n  terminate() {\n  }\n\n  // protected\n\n  constructor(options) {\n    Object.assign(options, options.$el.data());\n    super(options);\n    this.reflectOptions(options);\n    this.initializeEvents(options);\n    this.initialize(options);\n  }\n\n  destructor() {\n    this.log('info', 'construct',\n      ...this.constructor.logColor(`ðŸ—ï¸ \"${this.instanceName}\" %REPLACE%.`, 'destructing', 'red'));\n    this.terminate();\n    if (this.listenedEvents) {\n      this.forgetEvents(this.listenedEvents);\n      this.listenedEvents = null;\n    }\n  }\n\n  reflectOptions(options) {\n    Object.keys(options).forEach(attr => {\n      if (this.hasOwnProperty(attr)) {\n        this[attr] = options[attr];\n      }\n    });\n  }\n\n  initializeEvents(_options) {\n    const { events } = this.constructor;\n    if (events) {\n      if (!this.linkedEvents) {\n        this.linkedEvents = this.linkEvents(isFunction(events) ? events() : events);\n      }\n      this.listenedEvents = this.listenEvents(this.linkedEvents);\n    }\n  }\n\n  linkEvents(events) {\n    return mapValues(events, handle => isString(handle) ?\n      this[handle].bind(this)\n      :\n      (typeof isPlainObject(handle) ? this.linkEvents(handle) : handle)\n    );\n  }\n};\n","// TODO: may be rename Views, views, View, view\nimport { filter, find, without } from '../lib/helpers';\nimport View from '../view';\n\n// require content mixin\n// require events mixin\nexport default Base => (class extends Base {\n  View = View;\n  viewClasses = {};\n  viewInstances = [];\n\n  constructor(options) {\n    super(options);\n    this.viewOptions = {\n      debugMode: this.debugMode,\n      logging: { ...this.logging },\n      ...options.viewOptions,\n    };\n    this.log('info', 'construct', `ðŸ­ \"${this.instanceName}\" views mixin activated.`);\n  }\n\n  registerView(viewClass, options = {}) {\n    if (this.viewClasses[viewClass.selector]) {\n      this.error(`ðŸ­ View class for selector \\`${viewClass.selector}\\` already registered`,\n        this.viewClasses[viewClass.selector]);\n      return;\n    }\n    this.viewClasses[viewClass.selector] = viewClass;\n    this.listenToElement(\n      viewClass.selector,\n      $el => this.bindView($el, viewClass, options),\n      $el => this.unbindView($el, viewClass),\n      {\n        delay: viewClass.delay,\n        silent: true,\n      },\n    );\n  }\n\n  bindView($el, viewClass, options) {\n    if (!this.canBind($el, viewClass)) {\n      return null;\n    }\n    if (viewClass.instanceIndex) {\n      viewClass.instanceIndex += 1;\n    } else {\n      viewClass.instanceIndex = 1;\n    }\n    const view = new viewClass({\n      ...this.viewOptions,\n      ...options,\n      instanceName: `${viewClass.selector}_${viewClass.instanceIndex}`,\n      $el,\n    });\n    this.viewInstances.push(view);\n    return view;\n  }\n\n  canBind($element, viewClass) {\n    const view = this.getViewsOnElement($element, viewClass)[0];\n    if (view) {\n      this.log('warn', 'ðŸ­ Element already has bound view', $element, viewClass, view);\n      return false;\n    }\n    return true;\n  }\n\n  unbindView($element, viewClass) {\n    const view = this.getViewsOnElement($element, viewClass)[0];\n    if (view) {\n      view.destructor();\n      this.viewInstances = without(this.viewInstances, view);\n    }\n  }\n\n  getViewsOnElement($element, viewClass = null) {\n    const el = $element instanceof $ ? $element[0] : $element;\n    const filterOptions = { el };\n    if (viewClass) {\n      filterOptions.constructor = viewClass;\n    }\n    return filter(this.viewInstances, filterOptions);\n  }\n\n  getViewsInContainer($container, checkRoot = true) {\n    return filter(this.viewInstances, view =>\n      view.$el.closest($container).length > 0 && (checkRoot || view.el !== $container[0])\n    );\n  }\n\n  getAllViews(viewClass) {\n    return filter(this.viewInstances, { constructor: viewClass });\n  }\n\n  getFirstView(viewClass) {\n    return find(this.viewInstances, { constructor: viewClass });\n  }\n\n  getFirstChildView(viewClass) {\n    return find(this.viewInstances, view => view instanceof viewClass);\n  }\n});\n","import MinimalNormas from './minimalNormas';\nimport normasViews from './mixins/views';\n\nexport default normasViews(MinimalNormas);\n","// require navigation mixin\nexport default Base => (class extends Base {\n  static turboPageEnterEventName = 'turbolinks:load';\n  static turboPageLeaveEventName = 'turbolinks:before-cache';\n\n  bindPageEvents(options) {\n    this.Turbolinks = options.Turbolinks || global.Turbolinks;\n    const turbolinksExists = !!this.Turbolinks;\n    if (!this.enablings) this.enablings = {};\n    this.enablings.turbolinks = this.constructor.readOption(options.enablings, 'turbolinks', turbolinksExists);\n    if (this.enablings.turbolinks === true && !turbolinksExists) {\n      this.error('ðŸ›¤ Turbolinks: `option.enablings.turbolinks === true` but `!turbolinksExists`');\n    }\n    this.log('info', 'construct',\n      ...this.constructor.logColor(`ðŸ›¤ \"${this.instanceName}\" Turbolinks %REPLACE%.`,\n        this.enablings.turbolinks ? 'enabled' : 'disabled',\n        this.enablings.turbolinks ? 'green' : 'blue'));\n    if (this.enablings.turbolinks) {\n      // Turbolinks connected :)\n      // patchTurbolinks(this.Turbolinks); // TODO: check versions\n      patchTurbolinksPreviewControl(this.Turbolinks);\n      this.listenEvents(this.constructor.turboPageEnterEventName, this.pageEnter.bind(this));\n      this.listenEvents(this.constructor.turboPageLeaveEventName, this.pageLeave.bind(this));\n      if (options.Turbolinks) {\n        options.Turbolinks.start();\n      }\n    } else {\n      // No Turbolinks ;(\n      const turboNormasImportPath = `normas${process.env.NODE_ENV === 'development' ? '/src/js' : '/dist/js'}`;\n      this.log('warn', 'construct', `ðŸ›¤ You have${this.Turbolinks ? '' : 'n\\'t'} Turbolinks ` +\n        `and use '${turboNormasImportPath}/normasWithTurbolinks', but \\`enablings.turbolinks === false\\`. ` +\n        `Use '${turboNormasImportPath}/normas' instead.`);\n      $(this.pageEnter.bind(this));\n    }\n  }\n\n  visit(location) {\n    if (this.enablings.turbolinks) {\n      this.Turbolinks.visit(location);\n    } else {\n      super.visit(location);\n    }\n  }\n\n  setHash(hash) {\n    if (this.enablings.turbolinks) {\n      let controller = this.Turbolinks.controller;\n      controller.replaceHistoryWithLocationAndRestorationIdentifier(hash, controller.restorationIdentifier);\n    } else {\n      super.setHash(hash);\n    }\n  }\n\n  replaceLocation(url) {\n    if (this.enablings.turbolinks) {\n      this.Turbolinks.controller.replaceHistoryWithLocationAndRestorationIdentifier(url);\n    } else {\n      super.replaceLocation(url);\n    }\n  }\n\n  pushLocation(url) {\n    if (this.enablings.turbolinks) {\n      this.Turbolinks.controller.pushHistoryWithLocationAndRestorationIdentifier(url);\n    } else {\n      super.pushLocation(url);\n    }\n  }\n\n  sayAboutPageLoading(state) {\n    if (this.enablings.turbolinks) {\n      const progressBar = this.Turbolinks.controller.adapter.progressBar;\n      if (state) {\n        progressBar.setValue(0);\n        progressBar.show();\n      } else {\n        progressBar.hide();\n      }\n    } else {\n      super.sayAboutPageLoading(state);\n    }\n  }\n});\n\nfunction patchTurbolinksPreviewControl(Turbolinks) {\n  class OurView extends Turbolinks.View {\n    render({ snapshot, error, isPreview }, callback) {\n      this.markAsPreview(isPreview);\n      if (snapshot) {\n        // added `isPreview` argument\n        this.renderSnapshot(snapshot, isPreview, callback);\n      } else {\n        this.renderError(error, callback);\n      }\n    }\n\n    // added `isPreview` argument\n    renderSnapshot(snapshot, isPreview, callback) {\n      const renderer = new OurSnapshotRenderer(this.getSnapshot(), Turbolinks.Snapshot.wrap(snapshot), isPreview);\n      renderer.delegate = this.delegate;\n      renderer.render(callback);\n    }\n  }\n  Turbolinks.View = OurView;\n\n  class OurSnapshotRenderer extends Turbolinks.SnapshotRenderer {\n    // added `isPreview` argument\n    constructor(currentSnapshot, newSnapshot, isPreview) {\n      super(currentSnapshot, newSnapshot);\n      if (isPreview) {\n        this.newBody = this.newBody.cloneNode(true);\n        this.newBody.isPreview = true;\n      }\n    }\n  }\n}\n\nfunction patchTurbolinks(Turbolinks) {\n  class OurHeadDetails extends Turbolinks.HeadDetails {\n    constructor(...args) {\n      super(...args);\n      this.elements = {};\n      $(this.element).children().each((index, element) => {\n        let key = turboElementToKey(element);\n        if (!this.elements[key]) {\n          this.elements[key] = {\n            type: turboElementType(element),\n            tracked: turboElementIsTracked(element),\n            elements: [],\n          };\n        }\n        this.elements[key].elements.push(element);\n      });\n    }\n    // getTrackedElementSignature() {\n    //   let sign = super.getTrackedElementSignature();\n    //   console.log('sign ', sign);\n    //   return sign;\n    // }\n  }\n  Turbolinks.HeadDetails = OurHeadDetails;\n}\n\n// Injection in Turbolinks.HeadDetails for override this logic:\nfunction turboElementToKey(element) {\n  let url = element.getAttribute('src') || element.getAttribute('href');\n  if (url) {\n    let cuts = url.split('/');\n    cuts = cuts[cuts.length - 1];\n    if (cuts) { url = cuts }\n  }\n  return url || element.outerHTML;\n}\n\nfunction turboElementType(element) {\n  if (turboElementIsScript(element)) {\n    return 'script';\n  } else if (turboElementIsStylesheet(element)) {\n    return 'stylesheet';\n  }\n  return null;\n}\n\nfunction turboElementIsTracked(element) {\n  return element.getAttribute('data-turbolinks-track') === 'reload';\n}\n\nfunction turboElementIsScript(element) {\n  let tagName = element.tagName.toLowerCase();\n  return tagName === 'script';\n}\n\nfunction turboElementIsStylesheet(element) {\n  let tagName = element.tagName.toLowerCase();\n  return tagName === 'style' || (tagName === 'link' && element.getAttribute('rel') === 'stylesheet');\n}\n","import Normas from './index';\nimport normasTurbolinks from './mixins/turbolinks';\n\nexport default normasTurbolinks(Normas);\n"],"names":["$","fn","each$","handle","each","index","element","filter$","filter","slideToggleByState","length","a","shift","slideDown","slideUp","slideToggle","focusToEnd","$this","first","is","focus","val","focusTo","caretPos","createTextRange","range","move","select","selectionStart","setSelectionRange","caretPosition","iCaretPos","oField","document","selection","oSel","createRange","moveStart","value","text","isObject","isArray","Array","isFunction","v","isString","debounce","func","wait","timeoutId","args","setTimeout","groupByInArray","array","key","reduce","grouped","item","groupKey","group","find","k","push","flatten","result","forEach","collection","conditions","filterBase","mapValues","object","iteratee","keys","without","values","includes","baseName","prototype","call","makeConditionsMatch","conditionsKeys","Object","filterMatch","undefined","Base","debugMode","$el","instanceName","logging","constructor","readOption","el","log","logColor","method","console","message","count","replace","moveName","enter","intensity","repeat","template","colorText","color","logStyle","boldText","stylingReplace","style","isPlainObject","stylePairs","entries","beginStyle","map","p","join","endStyle","$content","content","classList","className","tagName","concat","defaultValue","options","events","eventsDebounced","eventsTable","eventsLogBuffer","logEventsDebounced","bind","eventName","trigger","listenEventsOnElement","$element","listeningArgs","listeningArguments","logEvents","selector","on","forgetEventsOnElement","logEventsOutput","off","elementName","contentName","plurEvents","logPlur","logBold","styledCount","countStyles","logCycle","cycleName","cycleStyles","styledElementName","elementStyles","eventRule","error","selectors","split","trim","event","currentTarget","assign","leave","delay","silent","contentEnter","makeElementContentEnter","contentLeave","makeElementContentLeave","listenToContent","contentEnterEventName","contentLeaveEventName","filterContent","logContent","$container","sayAboutContentLeave","html","sayAboutContentEnter","$newContent","replaceWith","insertBefore","remove","logEvent","eventStyles","contentStyles","instance","$elements","contentElements","data","elementEnterTimeoutIdDataName","$delayedElements","removeData","handleElements","handleName","prevent","preventEventForElement","preventInfo","styledHandleName","handleStyles","add","closest","preventContentEventsClassName","elementFlagName","_index","navigation","bindPageEvents","Turbolinks","global","turboNormasImportPath","process","env","NODE_ENV","pageEnter","listenEvents","pageEnterEventName","pageLeaveEventName","location","visit","window","hash","history","back","url","title","state","pushState","$page","logPage","pageSelector","href","Normas","normasNavigation","normasContent","normasEvents","NormasBase","reflectOptions","initializeEvents","initialize","terminate","listenedEvents","forgetEvents","hasOwnProperty","attr","_options","linkedEvents","linkEvents","babelHelpers.typeof","View","viewOptions","viewClass","viewClasses","listenToElement","bindView","unbindView","canBind","instanceIndex","view","viewInstances","getViewsOnElement","destructor","filterOptions","checkRoot","normasViews","MinimalNormas","turbolinksExists","enablings","turbolinks","turboPageEnterEventName","turboPageLeaveEventName","pageLeave","start","controller","replaceHistoryWithLocationAndRestorationIdentifier","restorationIdentifier","pushHistoryWithLocationAndRestorationIdentifier","progressBar","adapter","setValue","show","hide","patchTurbolinksPreviewControl","OurView","callback","snapshot","isPreview","markAsPreview","renderSnapshot","renderError","renderer","OurSnapshotRenderer","getSnapshot","Snapshot","wrap","delegate","render","currentSnapshot","newSnapshot","newBody","cloneNode","SnapshotRenderer","normasTurbolinks"],"mappings":"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"}